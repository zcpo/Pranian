
{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the Pranian application.",
      "properties": {
        "name": {
          "type": "string",
          "description": "User's full name."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "role": {
          "type": "string",
          "description": "User's role.",
          "enum": [
            "user",
            "admin",
            "super_admin"
          ]
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp of user creation."
        },
        "journalCount": {
          "type": "number",
          "description": "The number of journal entries a user has created."
        },
        "postsCount": {
          "type": "number",
          "description": "The number of posts a user has created."
        }
      },
      "required": [
        "name",
        "email",
        "role",
        "createdAt"
      ]
    },
    "Subscription": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Subscription",
      "type": "object",
      "description": "Represents a user's subscription status and details.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the subscription."
        },
        "startDate": {
          "type": "string",
          "description": "The date and time the subscription started.",
          "format": "date-time"
        },
        "endDate": {
          "type": "string",
          "description": "The date and time the subscription ends.",
          "format": "date-time"
        },
        "subscriptionTierId": {
          "type": "string",
          "description": "Reference to SubscriptionTier. (Relationship: Subscription 1:1 SubscriptionTier)"
        },
        "isTrial": {
          "type": "boolean",
          "description": "Indicates if the current subscription is a free trial."
        }
      },
      "required": [
        "id",
        "startDate",
        "endDate",
        "subscriptionTierId",
        "isTrial"
      ]
    },
    "SubscriptionTier": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "SubscriptionTier",
      "type": "object",
      "description": "Represents the different subscription tiers available (e.g., Free Trial, Paid).",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the subscription tier."
        },
        "name": {
          "type": "string",
          "description": "Name of the subscription tier (e.g., Free Trial, Paid)."
        },
        "price": {
          "type": "number",
          "description": "Price of the subscription tier per month.",
          "format": "number"
        },
        "trialLengthDays": {
          "type": "number",
          "description": "The trial period in days."
        }
      },
      "required": [
        "id",
        "name",
        "price"
      ]
    },
    "StoreItem": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "StoreItem",
      "type": "object",
      "description": "Represents an item available for sale in the store.",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the item."
        },
        "price": {
          "type": "number",
          "description": "The price of the item."
        },
        "images": {
          "type": "array",
          "description": "A list of image URLs for the item.",
          "items": {
            "type": "string",
            "format": "uri"
          }
        },
        "inventory": {
          "type": "number",
          "description": "The current stock level of the item."
        },
        "description": {
          "type": "string",
          "description": "A detailed description of the item."
        },
        "category": {
          "type": "string",
          "description": "The category the item belongs to."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the item was created."
        }
      },
      "required": [
        "name",
        "price",
        "images",
        "inventory",
        "description",
        "category",
        "createdAt"
      ]
    },
    "JournalEntry": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "JournalEntry",
      "type": "object",
      "description": "Represents a user's journal entry.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the journal entry."
        },
        "date": {
          "type": "string",
          "description": "The date and time the entry was created.",
          "format": "date-time"
        },
        "text": {
          "type": "string",
          "description": "The text content of the journal entry."
        },
        "mood": {
          "type": "string",
          "description": "The user-reported mood for the entry."
        }
      },
      "required": [
        "id",
        "date",
        "text"
      ]
    },
    "HomePage": {
      "title": "Home Page",
      "description": "Represents the content and configuration for the home page.",
      "type": "object",
      "properties": {
        "title": {
          "type": "string",
          "description": "The main title of the home page."
        },
        "sections": {
          "type": "array",
          "description": "An array of sections to be displayed on the home page."
        },
        "theme": {
          "type": "string",
          "description": "The theme of the home page."
        },
        "visible": {
          "type": "boolean",
          "description": "Whether the home page is visible to users."
        },
        "lastUpdatedBy": {
          "type": "string",
          "description": "The ID of the user who last updated the page."
        }
      },
      "required": [
        "title",
        "sections",
        "visible"
      ]
    },
    "LibraryContent": {
      "title": "Library Content",
      "description": "Represents a piece of content in the media library.",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "description": "The type of content.",
          "enum": [
            "audio",
            "video",
            "podcast",
            "yoga_video"
          ]
        },
        "title": {
          "type": "string",
          "description": "The title of the content."
        },
        "description": {
          "type": "string",
          "description": "A short description of the content."
        },
        "url": {
          "type": "string",
          "format": "uri",
          "description": "The URL to the media file."
        },
        "tags": {
          "type": "array",
          "description": "A list of tags for categorization.",
          "items": {
            "type": "string"
          }
        },
        "duration": {
          "type": "number",
          "description": "The duration of the content in seconds."
        },
        "level": {
          "type": "string",
          "description": "The difficulty level of the content.",
          "enum": [
            "beginner",
            "intermediate",
            "advanced",
            "all_levels"
          ]
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp of when the content was created."
        },
        "createdBy": {
          "type": "string",
          "description": "The ID of the user who created the content."
        },
        "section": {
          "type": "string",
          "description": "The library section this content belongs to.",
          "enum": [
            "Asana",
            "Pranayama",
            "Meditation",
            "Philosophy",
            "Anatomy",
            "Sequencing",
            "Styles",
            "Chakras",
            "Props",
            "Lifestyle",
            "Teaching",
            "Glossary"
          ]
        }
      },
      "required": [
        "type",
        "title",
        "description",
        "url",
        "duration",
        "level",
        "createdAt",
        "createdBy",
        "section"
      ]
    },
    "YogaSection": {
      "title": "Yoga Section",
      "description": "Represents a section within the yoga library (e.g., Asana, Pranayama).",
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the yoga section."
        },
        "description": {
          "type": "string",
          "description": "A short description of the section."
        },
        "contentCount": {
          "type": "number",
          "description": "The number of content items in this section."
        },
        "visible": {
          "type": "boolean",
          "description": "Whether this section is visible to users."
        }
      },
      "required": [
        "name",
        "description"
      ]
    },
    "Event": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Event",
      "type": "object",
      "description": "Represents a schedulable event like a workshop or retreat.",
      "properties": {
        "title": {
          "type": "string",
          "description": "The title of the event."
        },
        "description": {
          "type": "string",
          "description": "A detailed description of the event."
        },
        "startDate": {
          "type": "string",
          "format": "date-time",
          "description": "The start date and time of the event."
        },
        "endDate": {
          "type": "string",
          "format": "date-time",
          "description": "The end date and time of the event."
        },
        "price": {
          "type": "number",
          "description": "The cost to attend the event."
        },
        "maxAttendees": {
          "type": "number",
          "description": "The maximum number of attendees for the event."
        }
      },
      "required": [
        "title",
        "description",
        "startDate",
        "endDate",
        "price",
        "maxAttendees"
      ]
    },
    "Vibe": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Vibe",
      "type": "object",
      "description": "Represents a mood or vibe for a class, including associated color and description.",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the vibe."
        },
        "description": {
          "type": "string",
          "description": "A short description of the vibe."
        },
        "mood": {
          "type": "string",
          "description": "The mood associated with the vibe (e.g., energetic, calm, focused)."
        },
        "color": {
          "type": "string",
          "description": "A hex color code associated with the vibe."
        }
      },
      "required": [
        "name",
        "description"
      ]
    },
    "Lesson": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Lesson",
      "type": "object",
      "description": "Represents a yoga teaching lesson with a quiz.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the lesson."
        },
        "category": {
          "type": "string",
          "description": "The category of the lesson (e.g., Cueing Techniques)."
        },
        "title": {
          "type": "string",
          "description": "The title of the lesson."
        },
        "description": {
          "type": "string",
          "description": "A short description of the lesson."
        },
        "quiz": {
          "type": "array",
          "description": "An array of quiz questions for the lesson.",
          "items": {
            "type": "object",
            "properties": {
              "question": { "type": "string" },
              "options": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "id": { "type": "string" },
                    "text": { "type": "string" }
                  },
                  "required": ["id", "text"]
                }
              },
              "correctAnswerId": { "type": "string" }
            },
            "required": ["question", "options", "correctAnswerId"]
          }
        }
      },
      "required": ["id", "category", "title", "description", "quiz"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous",
      "google.com"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user profile information.  Uses path-based ownership for private user data.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user.  Corresponds to Firebase auth uid."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/subscriptions/{subscriptionId}",
        "definition": {
          "entityName": "Subscription",
          "schema": {
            "$ref": "#/backend/entities/Subscription"
          },
          "description": "Stores subscription details for each user. Uses path-based ownership.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            },
            {
              "name": "subscriptionId",
              "description": "The unique identifier for the user's subscription."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/journal_entries/{entryId}",
        "definition": {
          "entityName": "JournalEntry",
          "schema": {
            "$ref": "#/backend/entities/JournalEntry"
          },
          "description": "Stores journal entries for each user.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            },
            {
              "name": "entryId",
              "description": "The unique identifier for the journal entry."
            }
          ]
        }
      },
      {
        "path": "/subscriptionTiers/{subscriptionTierId}",
        "definition": {
          "entityName": "SubscriptionTier",
          "schema": {
            "$ref": "#/backend/entities/SubscriptionTier"
          },
          "description": "Stores different subscription tiers available (e.g., Free Trial, Paid).",
          "params": [
            {
              "name": "subscriptionTierId",
              "description": "The unique identifier for the subscription tier."
            }
          ]
        }
      },
      {
        "path": "/store_items/{itemId}",
        "definition": {
          "entityName": "StoreItem",
          "schema": {
            "$ref": "#/backend/entities/StoreItem"
          },
          "description": "Stores all items available in the e-commerce store.",
          "params": [
            {
              "name": "itemId",
              "description": "The unique identifier for the store item."
            }
          ]
        }
      },
      {
        "path": "/pages/home",
        "definition": {
          "entityName": "HomePage",
          "schema": {
            "$ref": "#/backend/entities/HomePage"
          },
          "description": "Stores the content and configuration for the home page.",
          "params": []
        }
      },
      {
        "path": "/library_content/{contentId}",
        "definition": {
          "entityName": "LibraryContent",
          "schema": {
            "$ref": "#/backend/entities/LibraryContent"
          },
          "description": "Stores all media content for the library.",
          "params": [
            {
              "name": "contentId",
              "description": "The unique identifier for the library content."
            }
          ]
        }
      },
      {
        "path": "/yoga_sections/{sectionId}",
        "definition": {
          "entityName": "YogaSection",
          "schema": {
            "$ref": "#/backend/entities/YogaSection"
          },
          "description": "Stores metadata for each section of the yoga library.",
          "params": [
            {
              "name": "sectionId",
              "description": "The unique identifier for the yoga section."
            }
          ]
        }
      },
      {
        "path": "/events/{eventId}",
        "definition": {
          "entityName": "Event",
          "schema": {
            "$ref": "#/backend/entities/Event"
          },
          "description": "Stores all schedulable events like workshops or retreats.",
          "params": [
            {
              "name": "eventId",
              "description": "The unique identifier for the event."
            }
          ]
        }
      },
      {
        "path": "/vibes/{vibeId}",
        "definition": {
          "entityName": "Vibe",
          "schema": {
            "$ref": "#/backend/entities/Vibe"
          },
          "description": "Stores different vibes for class music.",
          "params": [
            {
              "name": "vibeId",
              "description": "The unique identifier for the vibe."
            }
          ]
        }
      },
      {
        "path": "/lessons/{lessonId}",
        "definition": {
          "entityName": "Lesson",
          "schema": {
            "$ref": "#/backend/entities/Lesson"
          },
          "description": "Stores yoga teaching lessons and quizzes.",
          "params": [
            {
              "name": "lessonId",
              "description": "The unique identifier for the lesson."
            }
          ]
        }
      }
    ]
  }
}
