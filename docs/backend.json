{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the Pranian application.",
      "properties": {
        "name": {
          "type": "string",
          "description": "User's full name."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "role": {
          "type": "string",
          "description": "User's role.",
          "enum": [
            "user",
            "admin",
            "super_admin"
          ]
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp of user creation."
        },
        "journalCount": {
          "type": "number",
          "description": "The number of journal entries a user has created."
        },
        "postsCount": {
          "type": "number",
          "description": "The number of posts a user has created."
        }
      },
      "required": [
        "name",
        "email",
        "role",
        "createdAt"
      ]
    },
    "Subscription": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Subscription",
      "type": "object",
      "description": "Represents a user's subscription status and details.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the subscription."
        },
        "startDate": {
          "type": "string",
          "description": "The date and time the subscription started.",
          "format": "date-time"
        },
        "endDate": {
          "type": "string",
          "description": "The date and time the subscription ends.",
          "format": "date-time"
        },
        "subscriptionTierId": {
          "type": "string",
          "description": "Reference to SubscriptionTier. (Relationship: Subscription 1:1 SubscriptionTier)"
        },
        "isTrial": {
          "type": "boolean",
          "description": "Indicates if the current subscription is a free trial."
        }
      },
      "required": [
        "id",
        "startDate",
        "endDate",
        "subscriptionTierId",
        "isTrial"
      ]
    },
    "SubscriptionTier": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "SubscriptionTier",
      "type": "object",
      "description": "Represents the different subscription tiers available (e.g., Free Trial, Paid).",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the subscription tier."
        },
        "name": {
          "type": "string",
          "description": "Name of the subscription tier (e.g., Free Trial, Paid)."
        },
        "price": {
          "type": "number",
          "description": "Price of the subscription tier per month.",
          "format": "number"
        },
        "trialLengthDays": {
          "type": "number",
          "description": "The trial period in days."
        }
      },
      "required": [
        "id",
        "name",
        "price"
      ]
    },
    "Product": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Product",
      "type": "object",
      "description": "Represents a product sold in the Pranian store.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the product."
        },
        "name": {
          "type": "string",
          "description": "Name of the product."
        },
        "description": {
          "type": "string",
          "description": "Description of the product."
        },
        "price": {
          "type": "number",
          "description": "Price of the product."
        },
        "productCategoryId": {
          "type": "string",
          "description": "Reference to ProductCategory. (Relationship: Product 1:1 ProductCategory)"
        }
      },
      "required": [
        "id",
        "name",
        "description",
        "price",
        "productCategoryId"
      ]
    },
    "ProductCategory": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ProductCategory",
      "type": "object",
      "description": "Represents a category of products (e.g., Podcasts, Merchandise, Events, Books, Videos, Online Learning).",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the product category."
        },
        "name": {
          "type": "string",
          "description": "Name of the product category."
        }
      },
      "required": [
        "id",
        "name"
      ]
    },
    "Session": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Session",
      "type": "object",
      "description": "Represents a user's yoga or meditation session.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the session."
        },
        "date": {
          "type": "string",
          "description": "The date and time the session occurred.",
          "format": "date-time"
        },
        "duration": {
          "type": "number",
          "description": "The duration of the session in minutes."
        },
        "intensity": {
          "type": "number",
          "description": "The user-rated intensity of the session (1-5)."
        }
      },
      "required": [
        "id",
        "date",
        "duration"
      ]
    },
    "HomePage": {
      "title": "Home Page",
      "description": "Represents the content and configuration for the home page.",
      "type": "object",
      "properties": {
        "title": {
          "type": "string",
          "description": "The main title of the home page."
        },
        "sections": {
          "type": "array",
          "description": "An array of sections to be displayed on the home page."
        },
        "theme": {
          "type": "string",
          "description": "The theme of the home page."
        },
        "visible": {
          "type": "boolean",
          "description": "Whether the home page is visible to users."
        },
        "lastUpdatedBy": {
          "type": "string",
          "description": "The ID of the user who last updated the page."
        }
      },
      "required": [
        "title",
        "sections",
        "visible"
      ]
    },
    "LibraryContent": {
      "title": "Library Content",
      "description": "Represents a piece of content in the media library.",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "description": "The type of content.",
          "enum": [
            "audio",
            "video",
            "podcast",
            "yoga_video"
          ]
        },
        "title": {
          "type": "string",
          "description": "The title of the content."
        },
        "description": {
          "type": "string",
          "description": "A short description of the content."
        },
        "url": {
          "type": "string",
          "format": "uri",
          "description": "The URL to the media file."
        },
        "tags": {
          "type": "array",
          "description": "A list of tags for categorization.",
          "items": {
            "type": "string"
          }
        },
        "duration": {
          "type": "number",
          "description": "The duration of the content in seconds."
        },
        "level": {
          "type": "string",
          "description": "The difficulty level of the content.",
          "enum": [
            "beginner",
            "intermediate",
            "advanced",
            "all_levels"
          ]
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp of when the content was created."
        },
        "createdBy": {
          "type": "string",
          "description": "The ID of the user who created the content."
        },
        "section": {
          "type": "string",
          "description": "The library section this content belongs to.",
          "enum": [
            "Asana",
            "Pranayama",
            "Meditation",
            "Philosophy",
            "Anatomy",
            "Sequencing",
            "Styles",
            "Chakras",
            "Props",
            "Lifestyle",
            "Teaching",
            "Glossary"
          ]
        }
      },
      "required": [
        "type",
        "title",
        "description",
        "url",
        "duration",
        "level",
        "createdAt",
        "createdBy",
        "section"
      ]
    },
    "YogaSection": {
      "title": "Yoga Section",
      "description": "Represents a section within the yoga library (e.g., Asana, Pranayama).",
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the yoga section."
        },
        "description": {
          "type": "string",
          "description": "A short description of the section."
        },
        "contentCount": {
          "type": "number",
          "description": "The number of content items in this section."
        },
        "visible": {
          "type": "boolean",
          "description": "Whether this section is visible to users."
        }
      },
      "required": [
        "name",
        "description"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous",
      "google.com"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user profile information.  Uses path-based ownership for private user data.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user.  Corresponds to Firebase auth uid."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/subscriptions/{subscriptionId}",
        "definition": {
          "entityName": "Subscription",
          "schema": {
            "$ref": "#/backend/entities/Subscription"
          },
          "description": "Stores subscription details for each user. Uses path-based ownership.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            },
            {
              "name": "subscriptionId",
              "description": "The unique identifier for the user's subscription."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/sessions/{sessionId}",
        "definition": {
          "entityName": "Session",
          "schema": {
            "$ref": "#/backend/entities/Session"
          },
          "description": "Stores session analytics data for each user.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            },
            {
              "name": "sessionId",
              "description": "The unique identifier for the user's session."
            }
          ]
        }
      },
      {
        "path": "/subscriptionTiers/{subscriptionTierId}",
        "definition": {
          "entityName": "SubscriptionTier",
          "schema": {
            "$ref": "#/backend/entities/SubscriptionTier"
          },
          "description": "Stores different subscription tiers available (e.g., Free Trial, Paid).",
          "params": [
            {
              "name": "subscriptionTierId",
              "description": "The unique identifier for the subscription tier."
            }
          ]
        }
      },
      {
        "path": "/products/{productId}",
        "definition": {
          "entityName": "Product",
          "schema": {
            "$ref": "#/backend/entities/Product"
          },
          "description": "Stores product information for the e-commerce store.",
          "params": [
            {
              "name": "productId",
              "description": "The unique identifier for the product."
            }
          ]
        }
      },
      {
        "path": "/productCategories/{productCategoryId}",
        "definition": {
          "entityName": "ProductCategory",
          "schema": {
            "$ref": "#/backend/entities/ProductCategory"
          },
          "description": "Stores product categories (e.g., Podcasts, Merchandise, Events).",
          "params": [
            {
              "name": "productCategoryId",
              "description": "The unique identifier for the product category."
            }
          ]
        }
      },
      {
        "path": "/pages/home",
        "definition": {
          "entityName": "HomePage",
          "schema": {
            "$ref": "#/backend/entities/HomePage"
          },
          "description": "Stores the content and configuration for the home page.",
          "params": []
        }
      },
      {
        "path": "/library_content/{contentId}",
        "definition": {
          "entityName": "LibraryContent",
          "schema": {
            "$ref": "#/backend/entities/LibraryContent"
          },
          "description": "Stores all media content for the library.",
          "params": [
            {
              "name": "contentId",
              "description": "The unique identifier for the library content."
            }
          ]
        }
      },
      {
        "path": "/yoga_sections/{sectionId}",
        "definition": {
          "entityName": "YogaSection",
          "schema": {
            "$ref": "#/backend/entities/YogaSection"
          },
          "description": "Stores metadata for each section of the yoga library.",
          "params": [
            {
              "name": "sectionId",
              "description": "The unique identifier for the yoga section."
            }
          ]
        }
      }
    ]
  }
}
